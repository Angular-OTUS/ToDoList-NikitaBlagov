<ng-container *ngIf="stateIsEdit$ | async as stateIsEdit">
	<ng-container *ngIf="{ selectedItemId: (selectedItemId$ | async) } as observables">

		<div
			class="todolist-item"
			[ngClass]="{
				'todolist-item__selected': todoItem.id === observables.selectedItemId
			}"
			(click)="clickItem(todoItem)"
			(dblclick)="setEditMode(true)"
		>
			<div
				class="todolist-item__content"
				[ngClass]="{
					'todolist-item__content_active': !stateIsEdit.isEdit
				}"
			>
				<span>{{todoItem.id}} {{todoItem.text}}</span>
					<shared-button
						[hidden]="todoItem.status === 'COMPLETED'"
						[tooltip]="'Нажмите для удаления задачи'"
						(click)="deleteTodo($event)"
						[red]="true"
					>
						Delete
					</shared-button>
			</div>

			<div
				class="todolist-item__content"
				[ngClass]="{
					'todolist-item__content_active': stateIsEdit.isEdit
				}"
			>
				<input [(ngModel)]="todoItem.text" (blur)="saveEditItem()">

				<button (click)="saveEditItem()">Save</button>
			</div>

		</div>
	</ng-container>
</ng-container>

